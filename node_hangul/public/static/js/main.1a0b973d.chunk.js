(this["webpackJsonpmy-components"]=this["webpackJsonpmy-components"]||[]).push([[0],{111:function(e,t,n){e.exports=n(181)},116:function(e,t,n){},146:function(e,t){},180:function(e,t,n){},181:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),i=n.n(o),l=(n(116),n(19)),c=n.n(l),s=n(15),u=n(32),d=n(45),m=n(27),f=n(88),p=n(89),h=n(93),x=n(223),g=n(221),v=n(90),E=n.n(v),y=n(219),b=n(16),C=n(14),S=n(222),w=n(224),k=n(216),j=(n(149),n(150),n(152),n(56)),I=n.n(j),D={SOCKET_NAMESPACE:"/",urls:{load:"/loadJuso/useWorkers",loadFromDB:"/loadSong/useWorkers?from=db",search:"/searchJuso/withWorkers",clear:"/clearSong",clearCache:"/clearCache"}},O=n(46),z=n.n(O),W={},M=Object(k.a)((function(e){return{icon:{color:e.palette.text.secondary,marginRight:e.spacing(2)}}}));function L(){M();var e=r.a.useState(null),t=Object(C.a)(e,2),n=t[0],a=t[1],o=r.a.useState(""),i=Object(C.a)(o,2),l=i[0],c=i[1],s=r.a.useState([]),u=Object(C.a)(s,2),d=u[0],m=u[1],f=(r.a.useRef(!1),r.a.useMemo((function(){return I()((function(e,t){W.searchAddress(e,t)}),200)}),[]));return r.a.useEffect((function(){var e=!0;if(W.searchAddress=function(e,t){console.log(e),z.a.get("".concat(D.urls.search,"/").concat(encodeURIComponent(e.input),"?maxReturnCount=10")).then((function(e){var n=e.data,a=(n.count,n.result);t(a)}))},""!==l)return f({input:l},(function(t){if(e){var a=[];n&&(a=[n]),t&&(a=[].concat(Object(b.a)(a),Object(b.a)(t))),m(a)}})),function(){e=!1};m(n?[n]:[])}),[n,l,f]),r.a.createElement(w.a,{id:"material ui autocomplete",size:"small",style:{width:300,height:"4vh"},getOptionLabel:function(e){return"string"===typeof e?e:e.description},filterOptions:function(e){return e},options:d,autoComplete:!0,includeInputInList:!0,filterSelectedOptions:!0,value:n,onChange:function(e,t){m(t?[t].concat(Object(b.a)(d)):d),a(t)},onInputChange:function(e,t){c(t)},renderInput:function(e){return r.a.createElement(S.a,Object.assign({},e,{label:"\uc8fc\uc18c",variant:"outlined",fullWidth:!0}))}})}var A=r.a.memo((function(e){var t=e.gap,n=e.text,a=e.insert,o=void 0===a?0:a,i=e.update,l=void 0===i?0:i,c=e.deleteCount,s=void 0===c?0:c,u=e.totalSearched,d=void 0===u?0:u;return r.a.createElement(x.a,{display:"flex"},r.a.createElement(x.a,{display:"flex",width:"1",alignItems:"center",justifyContent:"center",mx:t,mt:t,height:"10vh",fontSize:"h3.fontSize",bgcolor:y.a[900]},r.a.createElement(x.a,{bgcolor:y.a[700],display:"flex",width:"10%",justifyContent:"center",flexDirection:"column",minWidth:"100px",ml:"10px"},r.a.createElement(x.a,{mt:"4px",ml:"10px",color:"white",fontSize:"caption.fontSize"},"Total Searched"),r.a.createElement(x.a,{my:"4px",mr:"15px",color:"white",fontSize:"body1.fontSize",textAlign:"right"},d)),r.a.createElement(x.a,{bgcolor:y.a[700],fontSize:"caption.fontSize",display:"flex",flexDirection:"column",ml:"10px"},r.a.createElement(L,null)),r.a.createElement(x.a,{width:"1",textAlign:"center",mx:"auto"},n),r.a.createElement(x.a,{bgcolor:y.a[700],visibility:"hidden",fontSize:"caption.fontSize",display:"flex",flexDirection:"column",mr:"10px"},r.a.createElement(L,null)),r.a.createElement(x.a,{bgcolor:y.a[700],display:"flex",width:"10%",justifyContent:"center",flexDirection:"column",ml:"auto",minWidth:"100px",mr:"10px"},r.a.createElement(x.a,{mt:"4px",ml:"10px",color:"white",fontSize:"caption.fontSize"},"Insert : ",o),r.a.createElement(x.a,{mt:"4px",ml:"10px",color:"white",fontSize:"caption.fontSize"},"Update : ",l),r.a.createElement(x.a,{my:"4px",ml:"10px",color:"white",fontSize:"caption.fontSize"},"Delete : ",s))))}));function H(e){var t=e.gap,n=e.title;return r.a.createElement(x.a,{textAlign:"center",bgcolor:y.a[700],m:t},n)}var T=r.a.memo((function(e){var t=e.gap,n=e.master,a=n.lastIndexedCount?n.lastIndexedCount:0,o=n.lastIndexedPercent?n.lastIndexedPercent:"0%",i=n.searching,l=void 0===i?0:i;return r.a.createElement(x.a,{display:"flex",height:"20vh",flexDirection:"column"},r.a.createElement(x.a,{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",height:"20vh",mx:t,fontSize:"fontSize",bgcolor:y.a[700],overflow:"hidden"},r.a.createElement(x.a,{display:"flex",justifyContent:"flex-start",flexDirection:"column",m:2,textAlign:"left"},r.a.createElement("div",null,"PID: ",n.pid),r.a.createElement("div",null,"MEM: ",n.mem),r.a.createElement("p",null),r.a.createElement("div",null,"TOTAL INDEXED : ",a.toLocaleString()),r.a.createElement("div",null,"TOTAL PERCENT : ",o.toLocaleString()),r.a.createElement("div",null,"LAST INDEXED DATE : ",n.lastIndexedDate)),r.a.createElement(x.a,null,r.a.createElement("div",{style:{fontSize:"12px"}},"Searching"),r.a.createElement("div",{style:{fontSize:"60px"}},l))))}));r.a.memo((function(e){var t=e.gap;return e.master,r.a.createElement(x.a,{display:"flex",height:"20vh",flexDirection:"column"},r.a.createElement(x.a,{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",height:"1",mx:t,fontSize:"fontSize",bgcolor:y.a[700],overflow:"hidden"},r.a.createElement(x.a,null,r.a.createElement("div",{style:{fontSize:"12px"}},"Insert"),r.a.createElement("div",{style:{fontSize:"60px"}},"0")),r.a.createElement(x.a,null,r.a.createElement("div",{style:{fontSize:"12px"}},"Update"),r.a.createElement("div",{style:{fontSize:"60px"}},"0")),r.a.createElement(x.a,null,r.a.createElement("div",{style:{fontSize:"12px"}},"Delete"),r.a.createElement("div",{style:{fontSize:"60px"}},"0"))),r.a.createElement(x.a,{bgcolor:y.a[800],mx:t,fontSize:"fontSize",textAlign:"center",mb:t},"last execution : ","2020/07/09 23:22:01"))}));var B=n(220);var N=r.a.memo((function(e){var t=e.gap,n=e.currentLog;console.log("rerendering Log : ",n);var a=function(e){var t=e.keyword,n=e.children;return t.length>20?r.a.createElement(B.a,{title:t},n):r.a.createElement("div",null,n)},o=function(e){var t=e.cacheHit,n=e.type,a=e.children,o="selected"===n?"darkseagreen":t&&"cyan",i="selected"===n&&500;return r.a.createElement("div",{style:{color:o,fontWeight:i}},a)},i={flexGrow:1,flexShrink:5,margin:"3px",minWidth:"120px",flexBasis:"120px"};return r.a.createElement(x.a,{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"stretch",flexGrow:3,mt:t,mx:t,overflow:"auto",textOverflow:"ellipsis",fontSize:"12px",bgcolor:y.a[700],style:{overflowX:"hidden"}},r.a.createElement(x.a,{style:Object(s.a)({},i,{minWidth:"120px"})},n.map((function(e){return r.a.createElement(o,{cacheHit:e.cacheHit,type:e.type},e.eventTime)}))),r.a.createElement(x.a,{style:Object(s.a)({},i,{flexBasis:"80",minWidth:"60px"})},n.map((function(e){return r.a.createElement(o,{cacheHit:e.cacheHit,type:e.type},e.userId)}))),r.a.createElement(x.a,{style:Object(s.a)({},i,{flexBasis:"80",minWidth:"60px"})},n.map((function(e){return r.a.createElement(o,{cacheHit:e.cacheHit,type:e.type},e.ip.replace("::ffff:",""))}))),r.a.createElement(x.a,{style:Object(s.a)({},i,{flexBasis:"80",minWidth:"60px"})},n.map((function(e){return r.a.createElement(o,{cacheHit:e.cacheHit,type:e.type},e.elapsed,"\ucd08")}))),r.a.createElement(x.a,{style:Object(s.a)({},i,{flexBasis:"80",minWidth:"60px"})},n.map((function(e){return r.a.createElement(o,{cacheHit:e.cacheHit,type:e.type},e.resultCount,"\uac74")}))),r.a.createElement(x.a,{style:Object(s.a)({},i,{flexGrow:5,flexShrink:1,whiteSpace:"nowrap",textOverflow:"ellipsis"})},n.map((function(e){return r.a.createElement(a,{keyword:e.keyword},r.a.createElement(o,{cacheHit:e.cacheHit,type:e.type},e.keyword))}))))}));var P=r.a.memo((function(e){var t=e.gap,n=e.workers,a="".concat(12-n.length/3,"px"),o="".concat(15-n.length/3,"px"),i="".concat(25-n.length/3,"px");return r.a.createElement(x.a,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",flexWrap:"wrap",flexGrow:"1",mx:t,overflow:"hidden",bgcolor:y.a[700]},n.map((function(e){return r.a.createElement(x.a,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",m:1,fontSize:o,bgcolor:y.a[600]},r.a.createElement(x.a,{display:"flex",overflow:"auto",justifyContent:"flex-start",flexDirection:"column",textAlign:"left",p:2},r.a.createElement("div",null,"PID: ",e.pid),r.a.createElement("div",null,"WORDS: ",e.words.toLocaleString()),r.a.createElement("p",null),r.a.createElement(x.a,{textAlign:"center",style:{fontSize:a}},"MEM"),r.a.createElement("div",{style:{fontSize:i}},e.mem)))})))}));var R=r.a.memo((function(e){var t=e.gap,n=e.caches,a="".concat(10-n.length/3,"px"),o="".concat(13-n.length/3,"px"),i="".concat(22-n.length/3,"px");return r.a.createElement(x.a,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",flexWrap:"wrap",height:"20vh",mx:t,bgcolor:y.a[700],overflow:"hidden"},n.map((function(e){return r.a.createElement(x.a,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",m:1,fontSize:o,bgcolor:y.a[600]},r.a.createElement(x.a,{display:"flex",overflow:"auto",justifyContent:"flex-start",flexDirection:"column",p:2,textAlign:"left"},r.a.createElement("div",null,"PID: ",e.pid),r.a.createElement("div",null,"COUNT: ",e.cacheCount),r.a.createElement("div",null,"CACHE HIT: ",e.cacheHit),r.a.createElement(x.a,{textAlign:"center",style:{fontSize:a}},"MEM"),r.a.createElement("div",{style:{fontSize:i}},e.mem)))})))})),G=n(182),X=n(225),_=Object(G.a)({root:{color:"#52af77",height:"5px",padding:0},thumb:{display:"none"},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:5,borderRadius:0},rail:{height:5,borderRadius:0}})(X.a),F=function(e){var t=e.value,n=e.onChange;return r.a.createElement(_,{value:t,onChange:n,valueLabelDisplay:"auto"})},J=n(4),U={get:function(e){return Object(u.a)(c.a.mark((function t(){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=D.urls[e]){t.next=4;break}return t.abrupt("return",Promise.resolve({success:!1,msg:"not valid type : ".concat(e)}));case 4:return t.next=6,z.a.get(n);case 6:if(200!==(a=t.sent).status){t.next=10;break}return console.log(a.data),t.abrupt("return",a.data);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()}},K=(n(180),Object(J.a)({root:{backgroundColor:y.a[800],"&:hover":{backgroundColor:y.a[500]},"&:active":{backgroundColor:y.a[300]}}})(g.a)),$=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).onClickLoad=Object(u.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState(Object(s.a)({},e.state,{startingIndex:!0,onIndexing:!0})),t.next=3,U.get("load");case 3:n=t.sent,console.log(n);case 5:case"end":return t.stop()}}),t)}))),e.onClickLoadFromDB=Object(u.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState(Object(s.a)({},e.state,{startingIndex:!0,onIndexing:!0})),t.next=3,U.get("loadFromDB");case 3:n=t.sent,console.log(n);case 5:case"end":return t.stop()}}),t)}))),e.onClickClear=Object(u.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.get("clear");case 2:n=t.sent,e.setState(Object(s.a)({},e.state,{indexDone:!1})),console.log(n);case 5:case"end":return t.stop()}}),t)}))),e.state={master:{},workers:[],cacheWorkers:[],currentLog:[],progress:0,onIndexing:!1,indexDone:!0,insertCount:0,updateCount:0,deleteCount:0},e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=D.SOCKET_NAMESPACE.endpoint,t=E()(e);t.on("connect",(function(){console.log("socket connected")})),t.on("masterMonitor",this.updateMasterMonitor.bind(this)),t.on("workerMonitor",this.updateWorkerMonitor.bind(this)),t.on("cacheWorkerMonitor",this.updateCacheWorkerMonitor.bind(this)),t.on("logMonitor",this.updateLogMonitor.bind(this)),t.on("scheuledIndexMonitor",this.updateScheduledIndexMonitor.bind(this)),t.on("progress",this.updateProgress.bind(this)),t.on("error",this.resetState.bind(this)),t.on("disconnect",this.resetState.bind(this)),t.on("connect_error",this.resetState.bind(this))}},{key:"updateMasterMonitor",value:function(e){console.log("update master:",e);var t=e.indexingStatus,n="INDEX_STARTED"===t,a="INDEXING"===t,r="INDEX_DONE"===t;this.setState(Object(s.a)({},this.state,{master:e,startingIndex:n,onIndexing:a,indexDone:r}))}},{key:"updateWorkerMonitor",value:function(e){this.setState(Object(s.a)({},this.state,{workers:e}))}},{key:"updateCacheWorkerMonitor",value:function(e){this.setState(Object(s.a)({},this.state,{cacheWorkers:e}))}},{key:"updateLogMonitor",value:function(e){console.log("update log:",e),this.setState(Object(s.a)({},this.state,{currentLog:e}))}},{key:"updateScheduledIndexMonitor",value:function(e){var t=e.insertCount,n=e.updateCount,a=e.deleteCount;this.setState(Object(s.a)({},this.state,{insertCount:t,updateCount:n,deleteCount:a}))}},{key:"updateProgress",value:function(e){var t=e>99.9;console.log("update progress: ",e,t),this.setState(Object(s.a)({},this.state,{progress:e,disalbeClearIndexBtn:!t,disalbeClearCacheBtn:!t,onIndexing:!t}))}},{key:"resetState",value:function(){this.setState({master:{},workers:[],currentLog:[],cacheWorkers:[]})}},{key:"onClickCacheClear",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.get("clearCache");case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSliderChange",value:function(){console.log("changed")}},{key:"render",value:function(){var e=this.state,t=e.workers,n=e.master,a=(e.scheduler,e.currentLog),o=e.cacheWorkers,i=e.progress,l=this.state,c=l.startingIndex,s=l.onIndexing,u=l.indexDone,d=this.state,m=d.insertCount,f=d.updateCount,p=d.deleteCount,h=this.state.master.totalSearched,g=c||s||u,v=c||s||u,E=c||s||!u,b=c||s||!u;return r.a.createElement(x.a,{display:"flex",flexDirection:"column",height:"100vh",className:"App"},r.a.createElement(A,{gap:.3,text:"Status",insert:m,update:f,delete:p,totalSearched:h}),r.a.createElement(x.a,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"stretch",height:"80vh"},r.a.createElement(x.a,{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",flexGrow:"1",width:"45vw"},r.a.createElement(H,{gap:.3,title:"master"}),r.a.createElement(T,{gap:.3,master:n}),r.a.createElement(N,{gap:.3,currentLog:a})),r.a.createElement(x.a,{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",flexGrow:"1",width:"45vw"},r.a.createElement(H,{gap:.3,title:"cache"}),r.a.createElement(R,{gap:.3,caches:o}),r.a.createElement(H,{gap:.3,title:"worker"}),r.a.createElement(P,{gap:.3,workers:t}))),r.a.createElement(F,{value:i,onChange:this.handleSliderChange,"aria-labelledby":"continuous-slider"}),r.a.createElement(x.a,{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",flexGrow:"1",mx:.3,mb:.3,bgcolor:y.a[900]},r.a.createElement(B.a,{open:g,title:s?"Wait indexing...":"Clear Index first!",placement:"right-end"},r.a.createElement(K,{disabled:g,onClick:this.onClickLoadFromDB,variant:"contained",color:"primary",size:"medium"},"load from DB")),r.a.createElement(B.a,{open:v,title:s?"Wait indexing...":"Clear Index first!",placement:"right-end"},r.a.createElement(K,{disabled:v,onClick:this.onClickLoad,variant:"contained",color:"primary",size:"medium"},"load from file")),r.a.createElement(B.a,{open:s,title:"Wait indexing...",placement:"right-end"},r.a.createElement(K,{disabled:E,onClick:this.onClickClear,variant:"contained",color:"primary",size:"medium"},"clear index")),r.a.createElement(K,{disabled:b,onClick:this.onClickCacheClear,variant:"contained",color:"primary",size:"medium"},"clear cache")))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[111,1,2]]]);
//# sourceMappingURL=main.1a0b973d.chunk.js.map